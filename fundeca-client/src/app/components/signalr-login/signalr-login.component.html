<div class="login-container">
  <div class="card">
    <div class="card-header">
      <h2>SignalR Connection</h2>
      <div class="connection-status" [class.connected]="isConnected" [class.disconnected]="!isConnected">
        {{ isConnected ? 'Connected' : 'Disconnected' }}
      </div>
    </div>

    <div class="card-body">
      @if (!isConnected) {
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="username">Email</label>
            <input 
              type="email" 
              id="username" 
              formControlName="username" 
              class="form-control"
              placeholder="Enter your email"
              [class.is-invalid]="loginForm.get('username')?.invalid && loginForm.get('username')?.touched">
          </div>

          <div class="form-group">
            <label for="password">Password</label>
            <input 
              type="password" 
              id="password" 
              formControlName="password" 
              class="form-control"
              placeholder="Enter your password"
              [class.is-invalid]="loginForm.get('password')?.invalid && loginForm.get('password')?.touched">
          </div>

          <button 
            type="submit" 
            class="btn btn-primary btn-block"
            [disabled]="loginForm.invalid">
            Connect to SignalR
          </button>
        </form>
      } @else {
        <div class="connected-view">
          <div class="alert alert-success">
            Successfully connected to SignalR hub
          </div>
          
          <div class="notifications-container">
            <h4>Notifications</h4>
            <div class="notification-list">
              @for (notification of notifications; track notification) {
                <div class="notification-item">
                  <div class="notification-header">
                    <span class="badge badge-info">{{ notification.type }}</span>
                    <small class="text-muted">{{ notification.timestamp | date:'medium' }}</small>
                  </div>
                  <div class="notification-message">{{ notification.message }}</div>
                </div>
              } @empty {
                <div class="text-muted">
                  No notifications received yet
                </div>
              }
            </div>
          </div>

          <div class="notification-container">
            <h3>Logs de SignalR</h3>
            <div *ngFor="let notification of notifications" class="notification-item">
              <span class="timestamp">{{notification.timestamp | date:'mediumTime'}}</span>
              <span class="message">{{notification.message}}</span>
            </div>
          </div>

          <button 
            (click)="disconnect()" 
            class="btn btn-danger btn-block mt-3">
            Disconnect
          </button>
        </div>
      }
    </div>
  </div>
</div>
